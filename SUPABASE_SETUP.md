# Инструкция по запуску A-LAB на Supabase

Этот проект полностью готов к работе с бэкендом Supabase. Выполните следующие шаги, чтобы активировать все функции.

## 1. Настройка Базы Данных
1. Создайте новый проект на [Supabase](https://supabase.com/).
2. Перейдите в раздел **SQL Editor**.
3. Нажмите **New Query** и скопируйте содержимое файла `/migrations/consolidated_schema.sql`.
4. Нажмите **Run**. Это создаст все таблицы, политики безопасности (RLS) и автоматические триггеры.

## 2. Настройка Хранилища (Storage)
Для загрузки аватаров и работ в портфолио:
1. Перейдите в раздел **Storage**.
2. Создайте два публичных бакета:
   - `avatars`
   - `portfolio`
3. В настройках бакетов убедитесь, что включен параметр **Public**.

## 3. Подключение сайта
1. В Supabase перейдите в **Project Settings** -> **API**.
2. Скопируйте `Project URL` и `anon public API key`.
3. Откройте файл `supabase-client.js` в корне проекта.
4. Замените значения переменных:
   ```javascript
   const SUPABASE_URL = 'ВАШ_URL';
   const SUPABASE_ANON_KEY = 'ВАШ_KEY';
   ```

## 4. Настройка Авторизации
1. Перейдите в **Authentication** -> **Providers**.
2. Убедитесь, что **Email** включен.
3. Отключите **Confirm Email**, если хотите, чтобы пользователи могли заходить сразу без подтверждения почты (для тестов).

## 5. Первые шаги
- Перейдите на страницу `login.html`.
- После того как вы зарегистрируете первого пользователя (через админку или напрямую в Supabase), он автоматически получит запись в таблице `residents` и приветственный баланс в 300 Astra Tokens.

---
**Что сделано в коде:**
- Все разделы (Проекты, Лента, Astra, Сообщество) теперь динамические.
- Добавлен `AnalyticsManager` для расчета реальной статистики.
- Добавлен `CommunityManager` для поиска по резидентам.
- Исправлена логика инициализации всех модулей.
